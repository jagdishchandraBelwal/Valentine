<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Forever Love ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
:root{
  --g1:#880e4f;
  --g2:#f06292;
  --p1:#ff69b4;
  --p2:#ff1493;
  --glass:rgba(255,255,255,0.16);
  --stroke:rgba(255,255,255,0.22);
  --shadow:rgba(0,0,0,0.45);
}

*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:'Poppins',sans-serif;
  color:#fff;
  overflow-x:hidden;
  background:linear-gradient(135deg,var(--g1),var(--g2));
  transition:background 1.6s ease;
}

/* --- Ambient background layers (darker) --- */
.bg-overlay{
  position:fixed; inset:0;
  pointer-events:none;
  background:
    radial-gradient(800px 500px at 10% 10%, rgba(255,20,147,0.35), transparent 60%),
    radial-gradient(900px 600px at 90% 20%, rgba(255,105,180,0.28), transparent 60%),
    radial-gradient(900px 700px at 40% 90%, rgba(255,255,255,0.12), transparent 70%);
  mix-blend-mode:screen;
  z-index:-2;
}
.bg-noise{
  position:fixed; inset:-20%;
  pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
  opacity:.18;
  z-index:-1;
  transform:rotate(8deg);
}

/* --- Floating hearts --- */
@keyframes fall{
  0%{transform:translateY(-120vh) rotate(0deg); opacity:0}
  10%{opacity:1}
  100%{transform:translateY(130vh) rotate(1080deg); opacity:0}
}
.heart{
  position:fixed;
  top:-10vh;
  user-select:none;
  pointer-events:none;
  filter:drop-shadow(0 12px 18px rgba(0,0,0,.35));
  z-index:0;
}

/* --- Floating love messages (clearer + more visible) --- */
@keyframes driftUp{
  0%{transform:translateY(20vh); opacity:0}
  15%{opacity:.95}
  100%{transform:translateY(-120vh); opacity:0}
}
@keyframes driftDown{
  0%{transform:translateY(-30vh); opacity:0}
  15%{opacity:.92}
  100%{transform:translateY(130vh); opacity:0}
}
.floater{
  position:fixed;
  left:0;
  font-family:'Playfair Display',serif;
  letter-spacing:.6px;
  font-weight:800;
  color:rgba(255,255,255,0.78);
  text-shadow:
    0 0 16px rgba(255,20,147,0.45),
    0 10px 30px rgba(0,0,0,0.30);
  user-select:none;
  pointer-events:none;
  white-space:nowrap;
  z-index:1;
  padding:8px 14px;
  border-radius:999px;
  background:rgba(0,0,0,0.22);
  border:1px solid rgba(255,255,255,0.14);
  backdrop-filter:blur(10px);
}

/* --- Music button --- */
.music-btn{
  position:fixed;
  bottom:22px; right:22px;
  z-index:60;
  width:56px; height:56px;
  border:0;
  border-radius:50%;
  cursor:pointer;
  background:linear-gradient(135deg,#ff69b4,#ff1493);
  color:#fff;
  font-size:1.5rem;
  box-shadow:0 16px 35px rgba(0,0,0,0.25);
  transition:transform .25s ease;
}
.music-btn:hover{transform:translateY(-2px) scale(1.05)}

/* --- One-page sections --- */
main{position:relative; z-index:2}
.section{
  min-height:100vh;
  padding:110px 22px 80px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.wrap{
  width:min(1120px, 94vw);
  display:grid;
  grid-template-columns: 1.05fr .95fr;
  gap:38px;
  align-items:center;
}
.section:nth-child(even) .wrap{grid-template-columns: .95fr 1.05fr}
/* @media (max-width: 900px){
  .wrap{grid-template-columns:1fr; gap:22px}
} */
@media (max-width: 900px){

  .wrap{
    grid-template-columns:1fr;
    gap:28px;
  }

  /* Make all sections consistent vertically */
  .section{
    padding:90px 20px 60px;
  }

  /* Card spacing improved */
  .card{
    padding:28px 22px;
    border-radius:22px;
  }

  /* Better readable text */
  .sub{
    font-size:1.05rem;
    line-height:1.85;
  }

  /* Media improved height */
  .media{
    min-height:380px;
    border-radius:22px;
  }

  /* Add spacing between stacked media + card */
  .section .wrap > *{
    width:100%;
  }

  /* Center headings on mobile */
  h1,h2{
    text-align:center;
  }

  .big-heart{
    text-align:center;
  }

  .timer{
    width:100%;
    text-align:center;
  }

}

/* --- Glass card --- */
.card{
  background:var(--glass);
  border:1px solid var(--stroke);
  backdrop-filter:blur(18px);
  border-radius:26px;
  padding:34px;
  box-shadow:0 20px 60px var(--shadow);
}
h1,h2{
  font-family:'Playfair Display',serif;
  text-shadow:0 0 34px rgba(255,20,147,0.35);
}
h1{font-size:clamp(2.8rem, 6vw, 5.2rem); line-height:1.05}
h2{font-size:clamp(2rem, 4.2vw, 3.3rem); margin-bottom:10px}
.sub{
  opacity:.92;
  font-size:1.08rem;
  line-height:1.9;
}
.big-heart{
  font-size:clamp(4.2rem, 9vw, 8.6rem);
  filter:drop-shadow(0 0 28px rgba(255,20,147,0.45));
  animation:beat 2s infinite;
  margin:10px 0 16px;
}
@keyframes beat{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.12)}
}

/* Media frames */
.media{
  position:relative;
  border-radius:28px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.18);
  box-shadow:0 22px 60px rgba(0,0,0,0.45);
  background:rgba(0,0,0,0.18);
  min-height:520px;
}
@media (max-width: 900px){.media{min-height:420px}}
.media::after{
  content:"";
  position:absolute; inset:0;
  background:radial-gradient(800px 500px at 30% 10%, rgba(255,255,255,0.12), transparent 60%),
             linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.45));
  pointer-events:none;
}

.slide{position:absolute; inset:0; opacity:0; transform:scale(1.03); transition:opacity 1.2s cubic-bezier(.22,1,.36,1), transform 1.2s cubic-bezier(.22,1,.36,1);}
.slide.active{opacity:1; transform:scale(1);}
.slide img, .slide video{width:100%; height:100%; object-fit:cover; display:block;}
.slide video{background:#000}

.badge{position:absolute; top:16px; left:16px; z-index:5; padding:10px 14px; border-radius:999px; font-weight:600; background:rgba(0,0,0,0.20); border:1px solid rgba(255,255,255,0.16); backdrop-filter:blur(10px);}
.dots{position:absolute; bottom:16px; left:50%; transform:translateX(-50%); display:flex; gap:8px; z-index:6;}
.dot{width:8px; height:8px; border-radius:999px; background:rgba(255,255,255,0.35); border:1px solid rgba(255,255,255,0.15); transition:all .25s ease;}
.dot.active{background:#fff; transform:scale(1.35)}

.timer{margin-top:18px; display:inline-block; padding:14px 18px; border-radius:16px; background:rgba(0,0,0,0.16); border:1px solid rgba(255,255,255,0.14); backdrop-filter:blur(12px); font-weight:600;}
.gift-btn{margin-top:22px; padding:15px 44px; border:0; border-radius:999px; background:linear-gradient(135deg,#ff69b4,#ff1493); color:#fff; font-size:1.15rem; cursor:pointer; box-shadow:0 18px 42px rgba(255,20,147,0.28); transition:transform .25s ease;}
.gift-btn:hover{transform:translateY(-2px) scale(1.04)}

footer{padding:30px 18px 60px; text-align:center; opacity:.85; font-size:.95rem;}

/* Reveal on scroll */
.reveal{opacity:0; transform:translateY(26px); transition:all 1s cubic-bezier(.22,1,.36,1);}
.reveal.on{opacity:1; transform:translateY(0);}

/* ===== Surprise Overlay (proposal) ===== */
.proposal{
  position:fixed; inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:22px;
}
.proposal.on{display:flex;}
.proposal .backdrop{
  position:absolute; inset:0;
  background:
    radial-gradient(700px 500px at 25% 20%, rgba(255,105,180,0.25), transparent 60%),
    radial-gradient(700px 500px at 70% 70%, rgba(255,20,147,0.22), transparent 65%),
    rgba(0,0,0,0.72);
  backdrop-filter:blur(10px);
}
.proposal .modal{
  position:relative;
  width:min(760px, 94vw);
  border-radius:28px;
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.18);
  box-shadow:0 28px 80px rgba(0,0,0,0.55);
  overflow:hidden;
}
.proposal .modal::before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(800px 520px at 50% 0%, rgba(255,255,255,0.10), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.30));
  pointer-events:none;
}
.proposal .content{
  position:relative;
  padding:38px 28px 28px;
  text-align:center;
}
.proposal h3{
  font-family:'Playfair Display',serif;
  font-size:clamp(2rem, 4vw, 3.2rem);
  margin-bottom:12px;
  text-shadow:0 0 30px rgba(255,20,147,0.45);
}
.proposal p{
  opacity:.95;
  font-size:1.08rem;
  line-height:1.8;
}
.ring{
  margin:18px auto 14px;
  width:130px; height:130px;
  border-radius:999px;
  display:grid;
  place-items:center;
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.35), rgba(255,255,255,0.06));
  border:1px solid rgba(255,255,255,0.18);
  box-shadow:0 18px 60px rgba(255,20,147,0.25);
  animation:ringPop 1.05s ease forwards;
}
@keyframes ringPop{
  from{transform:scale(.7); opacity:0}
  to{transform:scale(1); opacity:1}
}
.ring span{
  font-size:64px;
  filter:drop-shadow(0 0 24px rgba(255,20,147,0.35));
}

.proposal .btnRow{
  margin-top:18px;
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}
.pbtn{
  border:0;
  padding:13px 26px;
  border-radius:999px;
  cursor:pointer;
  font-weight:700;
  color:#fff;
  background:linear-gradient(135deg,#ff69b4,#ff1493);
  box-shadow:0 16px 40px rgba(255,20,147,0.25);
  transition:transform .2s ease;
}
.pbtn:hover{transform:translateY(-2px) scale(1.03)}
.pbtn.secondary{
  background:rgba(0,0,0,0.25);
  border:1px solid rgba(255,255,255,0.18);
  box-shadow:none;
}

.proposal .miniMsg{
  margin-top:16px;
  font-family:'Playfair Display',serif;
  font-weight:700;
  color:rgba(255,255,255,0.95);
  text-shadow:0 0 18px rgba(255,20,147,0.35);
  min-height:28px;
}

/* Confetti hearts inside overlay */
@keyframes confetti{
  0%{transform:translateY(-10vh) rotate(0deg); opacity:0}
  10%{opacity:1}
  100%{transform:translateY(120vh) rotate(900deg); opacity:0}
}
.confetti-heart{
  position:fixed;
  top:-12vh;
  z-index:10000;
  pointer-events:none;
  filter:drop-shadow(0 10px 18px rgba(0,0,0,0.35));
}
</style>
</head>

<body>

<div class="bg-overlay"></div>
<div class="bg-noise"></div>

<audio id="bgMusic" loop>
  <source src="romantic.mp3" type="audio/mp3">
</audio>
<button class="music-btn" id="musicBtn">üéµ</button>

<main id="top">

  <section class="section" id="home">
    <div class="wrap reveal">
      <div class="card">
        <h1>My Forever Love</h1>
        <div class="big-heart">‚ù§Ô∏è</div>
        <div class="sub">
          Happy Valentine's Day my love üíï<br><br>
          You are the reason my world feels complete.<br>
          Every moment with you is pure magic.<br><br>
          I love you endlessly.<br><br>
          ‚Äì Yours Forever
        </div>
      </div>

      <div class="media" data-player="p1">
        <div class="badge">Chapter 1 ‚Ä¢ Our Smile</div>
        <div class="slide active"><img src="images/photo5.jpeg" alt=""></div>
        <div class="slide"><img src="images/holding-hands.jpg" alt=""></div>
        <div class="slide"><img src="images/rainy-day-cuddle.jpg" alt=""></div>
        <div class="slide"><img src="images/us-together.jpg.jpeg" alt=""></div>
        <div class="slide"><img src="images/photo4.jpg" alt=""></div>
        <div class="slide"><img src="images/photo3.jpg" alt=""></div>
        <div class="dots"></div>
      </div>
    </div>
  </section>

  <section class="section" id="moments">
    <div class="wrap reveal">
      <div class="media" data-player="p2">
        <div class="badge">Chapter 2 ‚Ä¢ Memories</div>
        <div class="slide active"><img src="images/photo1.jpeg" alt=""></div>
        <div class="slide"><img src="images/photo2.jpeg" alt=""></div>
        <div class="slide"><img src="images/mountain-trip.jpeg" alt=""></div>
        <div class="slide"><img src="images/us-together.jpg.jpeg" alt=""></div>
        <div class="slide"><img src="images/home.jpeg" alt=""></div>
        <div class="slide"><img src="images/home1.jpeg" alt=""></div>
        <div class="dots"></div>
      </div>

      <div class="card">
        <h2>Our Memories üíû</h2>
        <div class="sub">
          From our first shy hello‚Ä¶<br>
          To late night laughs‚Ä¶<br>
          To silly fights and deeper love‚Ä¶<br><br>
          Every memory with you is priceless.
        </div>
      </div>
    </div>
  </section>

  <section class="section" id="promises">
    <div class="wrap reveal">
      <div class="card">
        <h2>My Promises üíç</h2>
        <div class="sub">
          I promise to protect you.<br>
          I promise to support your dreams.<br>
          I promise to choose you every single day.<br><br>
          Forever means forever.
        </div>
      </div>

      <div class="media" data-player="p3">
        <div class="badge">Chapter 3 ‚Ä¢ Little Moments</div>
        <div class="slide active"><img src="images/p2.jpeg" alt=""></div>
        <div class="slide"><img src="images/p1.jpeg" alt=""></div>
        <div class="slide"><img src="images/p3.jpeg" alt=""></div>
        <div class="slide"><img src="images/p4.jpeg" alt=""></div>
        <div class="dots"></div>
      </div>
    </div>
  </section>

  <section class="section" id="future">
    <div class="wrap reveal">
      <div class="media" data-player="v1">
        <div class="badge">Chapter 4 ‚Ä¢ Our Story in Motion</div>
        <div class="slide active">
          <video src="images/video1.mp4" muted playsinline preload="metadata"></video>
        </div>
        <div class="dots"></div>
      </div>

      <div class="card">
        <h2>Our Future üåü</h2>
        <div class="sub">
          Building a home together‚Ä¶<br>
          Traveling the world‚Ä¶<br>
          Growing old while holding hands‚Ä¶<br><br>
          The best is yet to come ‚Äî with you.
        </div>
        <div class="timer">Together for <span id="loveTimer2"></span></div>
      </div>
    </div>
  </section>

  <section class="section" id="gift">
    <div class="wrap reveal">
      <div class="card">
        <h2>Your Surprise üíå</h2>
        <div class="sub">
          Close your eyes‚Ä¶<br>
          Take a deep breath‚Ä¶<br><br>
          Click below ‚ù§Ô∏è
        </div>
        <button class="gift-btn" onclick="proposalMode()">Open Your Gift üíï</button>
      </div>

      <div class="media" data-player="p4">
        <div class="badge">Final ‚Ä¢ You & Me</div>
        <div class="slide active">
          <video src="images/ume.mp4" autoplay muted playsinline controls></video>
        </div>
        <div class="dots"></div>
      </div>
    </div>
  </section>

  <footer>
    Made with ‚ù§Ô∏è ‚Äî just for you.
  </footer>
</main>

<!-- ===== Proposal Overlay ===== -->
<div class="proposal" id="proposal">
  <div class="backdrop"></div>
  <div class="modal">
    <div class="content">
      <div class="ring"><span>üíç</span></div>
      <h3>Will you marry me? ‚ù§Ô∏è</h3>
      <p>
        You are my favorite person, my peace, my home.<br>
        I want every tomorrow to be with you.
      </p>

      <div class="btnRow">
        <button class="pbtn" id="yesBtn">YES! üíñ</button>
        <button class="pbtn secondary" id="closeBtn">Not now üôà</button>
      </div>

      <div class="miniMsg" id="miniMsg"></div>
    </div>
  </div>
</div>

<script>
/* Music */
const music = document.getElementById("bgMusic");
const btn = document.getElementById("musicBtn");
btn.onclick = () => {
  if (music.paused) { music.play(); btn.innerHTML = "üéµ"; }
  else { music.pause(); btn.innerHTML = "üîá"; }
};

/* Love timer */
const startDate = new Date("2022-02-14T00:00:00");
function fmt(n){return String(n).padStart(2,'0')}
function updateTimer(){
  const now = new Date();
  let diff = now - startDate;
  const days = Math.floor(diff / (1000*60*60*24));
  diff -= days * (1000*60*60*24);
  const hrs = Math.floor(diff / (1000*60*60));
  diff -= hrs * (1000*60*60);
  const mins = Math.floor(diff / (1000*60));
  diff -= mins * (1000*60);
  const secs = Math.floor(diff / 1000);
  const text = `${days} days ‚Ä¢ ${fmt(hrs)}:${fmt(mins)}:${fmt(secs)} üíï`;
  const t2 = document.getElementById("loveTimer2");
  if(t2) t2.textContent = text;
}
setInterval(updateTimer, 1000);
updateTimer();

/* Falling hearts */
const heartIcons = ["‚ù§Ô∏è","üíñ","üíï","üíó","üíò"];
function createHeart(){
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.textContent = heartIcons[Math.floor(Math.random()*heartIcons.length)];
  heart.style.left = Math.random()*100 + "vw";
  heart.style.fontSize = (Math.random()*1.8 + 1.2) + "rem";
  heart.style.animation = `fall ${Math.random()*7 + 10}s linear forwards`;
  heart.style.opacity = "0.95";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(), 18000);
}
setInterval(createHeart, 900);

/* Floating different love messages (CLEAR + VISIBLE) */
const loveLines = [
  "You are my home ‚ù§Ô∏è",
  "My heart chooses you üíñ",
  "I‚Äôm proud of you üå∏",
  "Thank you for being you ‚ú®",
  "I love your smile üòä",
  "You make life beautiful üå∑",
  "Forever feels easy with you üíû",
  "You are my peace üåô",
  "My favorite person üíò",
  "I choose you, always üíç",
  "You are my forever ‚ù§Ô∏è",
  "Every beat is for you üíì",
  "You + Me = Always ‚ôæÔ∏è",
  "My safe place ü´∂",
  "I love you more each day üåπ"
];

function createFloater(direction="up"){
  const el = document.createElement("div");
  el.className = "floater";
  el.textContent = loveLines[Math.floor(Math.random()*loveLines.length)];
  el.style.left = Math.random()*100 + "vw";
  el.style.fontSize = (Math.random()*0.55 + 1.05) + "rem"; // 1.05‚Äì1.6rem
  el.style.opacity = (Math.random()*0.15 + 0.78).toFixed(2); // 0.78‚Äì0.93
  el.style.top = (direction==="down") ? "0" : "auto";
  el.style.bottom = (direction==="up") ? "0" : "auto";
  el.style.animation = (direction==="up")
    ? `driftUp ${Math.random()*7 + 10}s linear forwards`
    : `driftDown ${Math.random()*7 + 10}s linear forwards`;
  document.body.appendChild(el);
  setTimeout(()=>el.remove(), 20000);
}
setInterval(()=>createFloater("up"), 2200);
setInterval(()=>createFloater("down"), 3200);

/* Theme change on scroll (kept) */
const themes = [
  ["#880e4f","#f06292"],
  ["#c2185b","#f06292"],
  ["#ad1457","#ff4081"],
  ["#d81b60","#f50057"],
  ["#9c0f4e","#e91e63"]
];
function setThemeByIndex(i){
  const t = themes[i % themes.length];
  document.documentElement.style.setProperty("--g1", t[0]);
  document.documentElement.style.setProperty("--g2", t[1]);
  document.body.style.background = `linear-gradient(135deg, ${t[0]}, ${t[1]})`;
}
const sections = Array.from(document.querySelectorAll(".section"));
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if(e.isIntersecting){
      const idx = sections.indexOf(e.target);
      setThemeByIndex(idx);
    }
  });
},{threshold:0.45});
sections.forEach(s => observer.observe(s));

/* Reveal on scroll */
const revObserver = new IntersectionObserver(entries => {
  entries.forEach(e => { if(e.isIntersecting) e.target.classList.add("on"); });
},{threshold:0.18});
document.querySelectorAll(".reveal").forEach(el => revObserver.observe(el));

/* Media slideshows (UPDATED: videos run complete, images use timer) */
function initPlayer(container){
  const slides = Array.from(container.querySelectorAll(".slide"));
  const dotsWrap = container.querySelector(".dots");
  dotsWrap.innerHTML = "";
  const dots = slides.map((_,i)=>{
    const d = document.createElement("div");
    d.className = "dot" + (i===0 ? " active": "");
    dotsWrap.appendChild(d);
    return d;
  });

  let idx = 0;
  let timer = null;

  function setActive(next){
    slides[idx].classList.remove("active");
    dots[idx].classList.remove("active");

    const prevV = slides[idx].querySelector("video");
    if(prevV){
      prevV.pause();
      try{ prevV.currentTime = 0; }catch(_){}
      prevV.onended = null;
    }

    idx = next;

    slides[idx].classList.add("active");
    dots[idx].classList.add("active");

    const v = slides[idx].querySelector("video");
    if(v){
      clearTimeout(timer);
      v.play().catch(()=>{});
      v.onended = () => setActive((idx+1) % slides.length);
    }else{
      clearTimeout(timer);
      timer = setTimeout(()=>setActive((idx+1) % slides.length), 3800);
    }
  }

  // Start
  const firstV = slides[0].querySelector("video");
  if(firstV){
    firstV.play().catch(()=>{});
    firstV.onended = () => setActive(1 % slides.length);
  }else{
    timer = setTimeout(()=>setActive(1 % slides.length), 3800);
  }

  // Pause offscreen
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(!e.isIntersecting){
        clearTimeout(timer);
        const v = slides[idx].querySelector("video");
        if(v){ v.pause(); }
      }else{
        const v = slides[idx].querySelector("video");
        if(v){
          v.play().catch(()=>{});
        }else{
          clearTimeout(timer);
          timer = setTimeout(()=>setActive((idx+1) % slides.length), 3800);
        }
      }
    });
  },{threshold:0.25});
  io.observe(container);
}
document.querySelectorAll(".media").forEach(initPlayer);

/* ===== Proposal Overlay + cute messages + heart confetti ===== */
const proposal = document.getElementById("proposal");
const yesBtn = document.getElementById("yesBtn");
const closeBtn = document.getElementById("closeBtn");
const miniMsg = document.getElementById("miniMsg");

const proposalLines = [
  "I choose you. Always. üíñ",
  "You make my world soft and beautiful. üå∑",
  "My favorite forever starts with you. ‚ôæÔ∏è",
  "Even on hard days ‚Äî I want YOU. ü´∂",
  "You‚Äôre my best decision. üíò"
];

let msgTimer = null;
let confettiTimer = null;

function spawnConfetti(){
  const el = document.createElement("div");
  el.className = "confetti-heart";
  el.textContent = heartIcons[Math.floor(Math.random()*heartIcons.length)];
  el.style.left = Math.random()*100 + "vw";
  el.style.fontSize = (Math.random()*1.8 + 1.2) + "rem";
  el.style.animation = `confetti ${Math.random()*2.6 + 3.6}s linear forwards`;
  el.style.opacity = "0.95";
  document.body.appendChild(el);
  setTimeout(()=>el.remove(), 7000);
}

function startProposalEffects(){
  let i = 0;
  miniMsg.textContent = proposalLines[0];

  msgTimer = setInterval(()=>{
    i = (i+1) % proposalLines.length;
    miniMsg.textContent = proposalLines[i];
  }, 1600);

  confettiTimer = setInterval(spawnConfetti, 120);
  setTimeout(()=>{ clearInterval(confettiTimer); confettiTimer = null; }, 4200);
}

function stopProposalEffects(){
  clearInterval(msgTimer);
  msgTimer = null;
}

function proposalMode(){
  proposal.classList.add("on");
  startProposalEffects();
}

yesBtn.onclick = () => {
  miniMsg.textContent = "Yayyy! üòçüíç‚ù§Ô∏è I love you sooo much!";
  clearInterval(confettiTimer);
  confettiTimer = setInterval(spawnConfetti, 90);
  setTimeout(()=>{ clearInterval(confettiTimer); confettiTimer = null; }, 5200);
};

closeBtn.onclick = () => {
  proposal.classList.remove("on");
  stopProposalEffects();
};

/* Close overlay if tap outside modal */
proposal.addEventListener("click", (e)=>{
  if(e.target.classList.contains("backdrop")){
    proposal.classList.remove("on");
    stopProposalEffects();
  }
});
</script>

</body>
</html>
